<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="本项目是关于Hog游戏的实现，包括游戏规则、策略函数和模拟器的开发。通过Python编程，实现了骰子模拟、得分计算、策略选择等功能，并进行了测试和优化。项目旨在提高编程技能和对游戏策略的理解。">
<meta property="og:type" content="article">
<meta property="og:title" content="CS61A Project1 Hog">
<meta property="og:url" content="http://example.com/2024/06/09/CS61A-Project01/index.html">
<meta property="og:site_name" content="Rex&#39;s Blog">
<meta property="og:description" content="本项目是关于Hog游戏的实现，包括游戏规则、策略函数和模拟器的开发。通过Python编程，实现了骰子模拟、得分计算、策略选择等功能，并进行了测试和优化。项目旨在提高编程技能和对游戏策略的理解。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-06-09T03:14:29.000Z">
<meta property="article:modified_time" content="2024-06-09T03:17:16.103Z">
<meta property="article:author" content="Rex">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2024/06/09/CS61A-Project01/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2024/06/09/CS61A-Project01/","path":"2024/06/09/CS61A-Project01/","title":"CS61A Project1 Hog"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>CS61A Project1 Hog | Rex's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Rex's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Project-1-The-Game-of-Hog"><span class="nav-number">1.</span> <span class="nav-text">Project 1: The Game of Hog</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Rules"><span class="nav-number">1.1.</span> <span class="nav-text">Rules</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Final-Product"><span class="nav-number">1.2.</span> <span class="nav-text">Final Product</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="nav-number">1.3.</span> <span class="nav-text">文件结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Phase-1-Simulator"><span class="nav-number">1.4.</span> <span class="nav-text">Phase 1: Simulator</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-0-0-pt"><span class="nav-number">1.4.1.</span> <span class="nav-text">Problem 0 (0 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-1-2-pt"><span class="nav-number">1.4.2.</span> <span class="nav-text">Problem 1 (2 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-2-1-pt"><span class="nav-number">1.4.3.</span> <span class="nav-text">Problem 2 (1 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-3-2-pt"><span class="nav-number">1.4.4.</span> <span class="nav-text">Problem 3 (2 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-4-2-pt"><span class="nav-number">1.4.5.</span> <span class="nav-text">Problem 4 (2 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-5-3-pt"><span class="nav-number">1.4.6.</span> <span class="nav-text">Problem 5 (3 pt)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Phase-2-Commentary"><span class="nav-number">1.5.</span> <span class="nav-text">Phase 2: Commentary</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Commentary-examples"><span class="nav-number">1.5.1.</span> <span class="nav-text">Commentary examples</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-6-2-pt"><span class="nav-number">1.5.2.</span> <span class="nav-text">Problem 6 (2 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-7-3-pt"><span class="nav-number">1.5.3.</span> <span class="nav-text">Problem 7 (3 pt)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Phase-3-Strategies"><span class="nav-number">1.6.</span> <span class="nav-text">Phase 3: Strategies</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-8-2-pt"><span class="nav-number">1.6.1.</span> <span class="nav-text">Problem 8 (2 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-9-2-pt"><span class="nav-number">1.6.2.</span> <span class="nav-text">Problem 9 (2 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-10-1-pt"><span class="nav-number">1.6.3.</span> <span class="nav-text">Problem 10 (1 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Problem-11-2-pt"><span class="nav-number">1.6.4.</span> <span class="nav-text">Problem 11 (2 pt)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Optional-Problem-12-0-pt"><span class="nav-number">1.6.5.</span> <span class="nav-text">Optional: Problem 12 (0 pt)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E7%BB%88%E6%B5%8B%E8%AF%84"><span class="nav-number">1.7.</span> <span class="nav-text">最终测评</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rex</p>
  <div class="site-description" itemprop="description">最是人间留不住，朱颜辞镜花辞树。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">19</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/09/CS61A-Project01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rex">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rex's Blog">
      <meta itemprop="description" content="最是人间留不住，朱颜辞镜花辞树。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="CS61A Project1 Hog | Rex's Blog">
      <meta itemprop="description" content="本项目是关于Hog游戏的实现，包括游戏规则、策略函数和模拟器的开发。通过Python编程，实现了骰子模拟、得分计算、策略选择等功能，并进行了测试和优化。项目旨在提高编程技能和对游戏策略的理解。">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CS61A Project1 Hog
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-06-09 11:14:29 / 修改时间：11:17:16" itemprop="dateCreated datePublished" datetime="2024-06-09T11:14:29+08:00">2024-06-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/" itemprop="url" rel="index"><span itemprop="name">CS61A</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61A/Project/" itemprop="url" rel="index"><span itemprop="name">Project</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">本项目是关于Hog游戏的实现，包括游戏规则、策略函数和模拟器的开发。通过Python编程，实现了骰子模拟、得分计算、策略选择等功能，并进行了测试和优化。项目旨在提高编程技能和对游戏策略的理解。</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="Project-1-The-Game-of-Hog"><a href="#Project-1-The-Game-of-Hog" class="headerlink" title="Project 1: The Game of Hog"></a>Project 1: The Game of Hog</h2><h3 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h3><p>有两个玩家，轮流进行回合，玩家选择骰子的数量（最多10个），得到每个骰子的点数，将点数之和加入总分中，总分先达到<code>100</code>即获胜。</p>
<p><code>Sow Sad</code>：如果有一个骰子点数为<code>1</code>，本回合得分为<code>1</code></p>
<p><code>Piggy Points</code>：如果选择<code>0</code>个骰子，本回合获得<code>k + 3</code>分，<code>k</code>为对手分数的平方的位数中值最小的一位。</p>
<p><code>More Boar</code>：回合结束后，如果玩家的最高位小于对手的最高位，玩家的次高位小于对手的次高位，继续进行一回合。</p>
<h3 id="Final-Product"><a href="#Final-Product" class="headerlink" title="Final Product"></a>Final Product</h3><p>最终效果可以参考：<a target="_blank" rel="noopener" href="https://hog.cs61a.org/">Final Product</a></p>
<h3 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h3><p>项目目录如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── calc.py </span><br><span class="line">├── default_graphics.py</span><br><span class="line">├── dice.py</span><br><span class="line">├── gui_files</span><br><span class="line">├── hog_gui.py</span><br><span class="line">├── hog.py</span><br><span class="line">├── ok</span><br><span class="line">├── proj01.ok</span><br><span class="line">├── __pycache__</span><br><span class="line">├── tests</span><br><span class="line">└── ucb.py</span><br></pre></td></tr></table></figure>

<p>其中比较重要的有：</p>
<ul>
<li><code>hog.py</code>：项目的初始代码</li>
<li><code>dice.py</code>：关于骰子的函数</li>
<li><code>hog_gui.py</code>：项目的用户图形化界面（<code>graphical user interface</code>）</li>
<li><code>ucb.py</code>：本课程的实用函数</li>
<li><code>gui_files</code>：Web GUI 使用的各种内容的目录</li>
</ul>
<p>执行如下代码可以运行项目：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 hog_gui.py</span><br></pre></td></tr></table></figure>

<h3 id="Phase-1-Simulator"><a href="#Phase-1-Simulator" class="headerlink" title="Phase 1: Simulator"></a>Phase 1: Simulator</h3><h4 id="Problem-0-0-pt"><a href="#Problem-0-0-pt" class="headerlink" title="Problem 0 (0 pt)"></a>Problem 0 (0 pt)</h4><p><code>dice.py</code>中定义了两种骰子函数：</p>
<ul>
<li><code>make_fair_dice(sides)</code>：<code>sides</code>表示骰子的面数，该函数返回一个函数<code>dice</code>，<code>dice</code>会随机返回<code>[a, b]</code>中的一个值。</li>
<li><code>make_test_dice(*outcomes)</code>：<code>outcomes</code>是一个正整数序列，该函数返回一个函数<code>dice</code>，<code>dice</code>会顺序、周期性地返回<code>outcomes</code>中的值，该骰子函数主要用作测试。</li>
</ul>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 00 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下（第二题读错题了，要的是“摇”一个6个面的骰子的方法）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 0 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 2)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; test_dice = make_test_dice(4, 1, 2)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; test_dice()</span></span><br><span class="line">? 4</span><br><span class="line">-- OK! --</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; test_dice() <span class="comment"># Second call</span></span></span><br><span class="line">? 1</span><br><span class="line">-- OK! --</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; test_dice() <span class="comment"># Third call</span></span></span><br><span class="line">? 2</span><br><span class="line">-- OK! --</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; test_dice() <span class="comment"># Fourth call</span></span></span><br><span class="line">? 4</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 0 &gt; Suite 2 &gt; Case 1</span><br><span class="line">(cases remaining: 1)</span><br><span class="line"></span><br><span class="line">Q: Which of the following is the correct way to &quot;roll&quot; a fair, six-sided die?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) six_sided()</span><br><span class="line">1) make_fair_dice(6)</span><br><span class="line">2) make_test_dice(6)</span><br><span class="line">3) six_sided</span><br><span class="line">? 1</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) six_sided()</span><br><span class="line">1) make_fair_dice(6)</span><br><span class="line">2) make_test_dice(6)</span><br><span class="line">3) six_sided</span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 0 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<h4 id="Problem-1-2-pt"><a href="#Problem-1-2-pt" class="headerlink" title="Problem 1 (2 pt)"></a>Problem 1 (2 pt)</h4><p>实现<code>roll_dice(num_rolls, dice=six_sided)</code>函数，<code>num_rolls</code>为骰子数量，<code>dice</code>为骰子函数，返回该回合的得分，需要考虑<code>Sow Sad</code>规则。</p>
<p><strong><code>注意</code></strong> ：哪怕中途有骰子出现了<code>1</code>，也要摇完<code>num_rolls</code>次骰子，否则测评会出错。</p>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 01 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 1 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 59)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; roll_dice(2, make_test_dice(4, 6, 1))</span></span><br><span class="line">? 10</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 1 &gt; Suite 1 &gt; Case 2</span><br><span class="line">(cases remaining: 58)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; roll_dice(3, make_test_dice(4, 6, 1))</span></span><br><span class="line">? 11</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? 1</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 1 &gt; Suite 1 &gt; Case 3</span><br><span class="line">(cases remaining: 57)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; roll_dice(4, make_test_dice(2, 2, 3))</span></span><br><span class="line">? 9</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 1 &gt; Suite 1 &gt; Case 4</span><br><span class="line">(cases remaining: 56)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a = roll_dice(4, make_test_dice(1, 2, 3))</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a <span class="comment"># check that the value is being returned, not printed</span></span></span><br><span class="line">? 1</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 1 &gt; Suite 1 &gt; Case 5</span><br><span class="line">(cases remaining: 55)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; counted_dice = make_test_dice(4, 1, 2, 6)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; roll_dice(3, counted_dice)</span></span><br><span class="line">? 1</span><br><span class="line">-- OK! --</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Make sure you call dice exactly num_rolls times!</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># If you call it fewer or more than that, it won&#x27;t be at the right spot in the cycle for the next roll</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Note that a return statement within a loop ends the loop</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; roll_dice(1, counted_dice)</span></span><br><span class="line">? 6</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 1 &gt; Suite 1 &gt; Case 6</span><br><span class="line">(cases remaining: 54)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; roll_dice(9, make_test_dice(6))</span></span><br><span class="line">? 54</span><br><span class="line">-- OK! --</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; roll_dice(7, make_test_dice(2, 2, 2, 2, 2, 2, 1))</span></span><br><span class="line">? 1</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 1 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">roll_dice</span>(<span class="params">num_rolls, dice=six_sided</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Simulate rolling the DICE exactly NUM_ROLLS &gt; 0 times. Return the sum of</span></span><br><span class="line"><span class="string">    the outcomes unless any of the outcomes is 1. In that case, return 1.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    num_rolls:  The number of dice rolls that will be made.</span></span><br><span class="line"><span class="string">    dice:       A function that simulates a single dice roll outcome.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># These assert statements ensure that num_rolls is a positive integer.</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">type</span>(num_rolls) == <span class="built_in">int</span>, <span class="string">&#x27;num_rolls must be an integer.&#x27;</span></span><br><span class="line">    <span class="keyword">assert</span> num_rolls &gt; <span class="number">0</span>, <span class="string">&#x27;Must roll at least once.&#x27;</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 1</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    pt_one = <span class="literal">False</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, num_rolls):</span><br><span class="line">        pt = dice()</span><br><span class="line">        <span class="keyword">if</span> pt == <span class="number">1</span>:</span><br><span class="line">            pt_one = <span class="literal">True</span></span><br><span class="line">        <span class="built_in">sum</span> += pt</span><br><span class="line">    <span class="keyword">return</span> (<span class="number">1</span> <span class="keyword">if</span> pt_one <span class="keyword">else</span> <span class="built_in">sum</span>)</span><br><span class="line">	<span class="comment"># END PROBLEM 1</span></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 01 --local</span><br></pre></td></tr></table></figure>

<h4 id="Problem-2-1-pt"><a href="#Problem-2-1-pt" class="headerlink" title="Problem 2 (1 pt)"></a>Problem 2 (1 pt)</h4><p>实现<code>piggy_points(score)</code>函数，<code>score</code>是对手的分数，<code>Piggy Points</code>规则见上，返回本回合的得分。</p>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 02 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 2 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 36)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import tests.construct_check as <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; piggy_points(4)</span></span><br><span class="line">? 4</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 2 &gt; Suite 1 &gt; Case 2</span><br><span class="line">(cases remaining: 35)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import tests.construct_check as <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; piggy_points(10)</span></span><br><span class="line">? 3</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 2 &gt; Suite 1 &gt; Case 3</span><br><span class="line">(cases remaining: 34)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import tests.construct_check as <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; piggy_points(94)</span></span><br><span class="line">? 6</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 2 &gt; Suite 1 &gt; Case 4</span><br><span class="line">(cases remaining: 33)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import tests.construct_check as <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; piggy_points(0)</span></span><br><span class="line">? 3</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 2 &gt; Suite 1 &gt; Case 5</span><br><span class="line">(cases remaining: 32)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import tests.construct_check as <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a = piggy_points(24)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a <span class="comment"># check that the value is being returned, not printed</span></span></span><br><span class="line">? 8</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 2 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">piggy_points</span>(<span class="params">score</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return the points scored from rolling 0 dice.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    score:  The opponent&#x27;s current score.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 2</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">smallest_digit</span>(<span class="params">num</span>):</span><br><span class="line">        <span class="keyword">if</span> num &lt; <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">return</span> num</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">min</span>(num % <span class="number">10</span>, smallest_digit(num // <span class="number">10</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> smallest_digit(score * score) + <span class="number">3</span></span><br><span class="line">	<span class="comment"># END PROBLEM 2</span></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 02 --local</span><br></pre></td></tr></table></figure>

<h4 id="Problem-3-2-pt"><a href="#Problem-3-2-pt" class="headerlink" title="Problem 3 (2 pt)"></a>Problem 3 (2 pt)</h4><p>实现<code>take_turn(num_rolls, opponent_score, dice=six_sided, goal=GOAL_SCORE)</code>函数，返回玩家在本回合的得分，参数如下：</p>
<ul>
<li><code>num_rolls</code>：骰子的数量</li>
<li><code>opponent_score</code>：对手的分数</li>
<li><code>dice</code>：骰子函数</li>
<li><code>goal</code>：最高分</li>
</ul>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 03 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 3 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 10)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; take_turn(2, 0, make_test_dice(4, 5, 1))</span></span><br><span class="line">? 9</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 3 &gt; Suite 1 &gt; Case 2</span><br><span class="line">(cases remaining: 9)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; take_turn(3, 0, make_test_dice(4, 6, 1))</span></span><br><span class="line">? 1</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 3 &gt; Suite 1 &gt; Case 3</span><br><span class="line">(cases remaining: 8)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; take_turn(0, 2)</span></span><br><span class="line">? 7</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 3 &gt; Suite 1 &gt; Case 4</span><br><span class="line">(cases remaining: 7)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; take_turn(0, 0)</span></span><br><span class="line">? 3</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 3 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>思路：当骰子数量为<code>0</code>时，使用<code>Piggy Points</code>规则；否则，正常摇骰子。</p>
<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">take_turn</span>(<span class="params">num_rolls, opponent_score, dice=six_sided, goal=GOAL_SCORE</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Simulate a turn rolling NUM_ROLLS dice, which may be 0 in the case</span></span><br><span class="line"><span class="string">    of a player using Piggy Points.</span></span><br><span class="line"><span class="string">    Return the points scored for the turn by the current player.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    num_rolls:       The number of dice rolls that will be made.</span></span><br><span class="line"><span class="string">    opponent_score:  The total score of the opponent.</span></span><br><span class="line"><span class="string">    dice:            A function that simulates a single dice roll outcome.</span></span><br><span class="line"><span class="string">    goal:            The goal score of the game.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Leave these assert statements here; they help check for errors.</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">type</span>(num_rolls) == <span class="built_in">int</span>, <span class="string">&#x27;num_rolls must be an integer.&#x27;</span></span><br><span class="line">    <span class="keyword">assert</span> num_rolls &gt;= <span class="number">0</span>, <span class="string">&#x27;Cannot roll a negative number of dice in take_turn.&#x27;</span></span><br><span class="line">    <span class="keyword">assert</span> num_rolls &lt;= <span class="number">10</span>, <span class="string">&#x27;Cannot roll more than 10 dice.&#x27;</span></span><br><span class="line">    <span class="keyword">assert</span> opponent_score &lt; goal, <span class="string">&#x27;The game should be over.&#x27;</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 3</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">if</span> num_rolls == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> piggy_points(opponent_score)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> roll_dice(num_rolls, dice)</span><br><span class="line">    <span class="comment"># END PROBLEM 3</span></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 03 --local</span><br></pre></td></tr></table></figure>

<h4 id="Problem-4-2-pt"><a href="#Problem-4-2-pt" class="headerlink" title="Problem 4 (2 pt)"></a>Problem 4 (2 pt)</h4><p>实现<code>more_boar(player_score, opponent_score)</code>函数，<code>player_score</code>是当前玩家的分数，<code>opponent_score</code>是对手的分数，根据<code>More Boar</code>规则，判断下一个回合属于哪个玩家，若属于当前玩家，则返回<code>True</code>，否则返回<code>False</code>。</p>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 04 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 3 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 10)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; take_turn(2, 0, make_test_dice(4, 5, 1))</span></span><br><span class="line">? 9</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 3 &gt; Suite 1 &gt; Case 2</span><br><span class="line">(cases remaining: 9)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; take_turn(3, 0, make_test_dice(4, 6, 1))</span></span><br><span class="line">? 1</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 3 &gt; Suite 1 &gt; Case 3</span><br><span class="line">(cases remaining: 8)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; take_turn(0, 2)</span></span><br><span class="line">? 7</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 3 &gt; Suite 1 &gt; Case 4</span><br><span class="line">(cases remaining: 7)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; take_turn(0, 0)</span></span><br><span class="line">? 3</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 4 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">more_boar</span>(<span class="params">player_score, opponent_score</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return whether the player gets an extra turn.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    player_score:   The total score of the current player.</span></span><br><span class="line"><span class="string">    opponent_score: The total score of the other player.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; more_boar(21, 43)</span></span><br><span class="line"><span class="string">    True</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; more_boar(22, 43)</span></span><br><span class="line"><span class="string">    True</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; more_boar(43, 21)</span></span><br><span class="line"><span class="string">    False</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; more_boar(12, 12)</span></span><br><span class="line"><span class="string">    False</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; more_boar(7, 8)</span></span><br><span class="line"><span class="string">    False</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 4</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">two_digits</span>(<span class="params">x</span>):</span><br><span class="line">        a = x % <span class="number">10</span></span><br><span class="line">        b = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> x &lt; <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">return</span> b, a</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> x &gt; <span class="number">0</span>:</span><br><span class="line">            b = a</span><br><span class="line">            a = x % <span class="number">10</span></span><br><span class="line">            x //= <span class="number">10</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> a, b</span><br><span class="line">    </span><br><span class="line">    tmp_p1, tmp_p2 = two_digits(player_score)</span><br><span class="line">    tmp_o1, tmp_o2 = two_digits(opponent_score)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tmp_p1 &lt; tmp_o1 <span class="keyword">and</span> tmp_p2 &lt; tmp_o2</span><br><span class="line">    <span class="comment"># END PROBLEM 4</span></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 04 --local</span><br></pre></td></tr></table></figure>

<h4 id="Problem-5-3-pt"><a href="#Problem-5-3-pt" class="headerlink" title="Problem 5 (3 pt)"></a>Problem 5 (3 pt)</h4><p>实现<code>play</code>函数，模拟游戏的运行，返回两个玩家的最终分数：</p>
<ul>
<li><p><code>strategy0</code>：玩家0的策略，根据当前双方的分数，返回骰子数量</p>
</li>
<li><p><code>strategy1</code>：玩家1的策略，根据当前双方的分数，返回骰子数量</p>
</li>
<li><p><code>score0</code>：玩家0的分数</p>
</li>
<li><p><code>score1</code>：玩家1的分数</p>
</li>
<li><p><code>dice</code>：骰子函数</p>
</li>
<li><p><code>goal</code>：目标分数</p>
</li>
</ul>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 05 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 5 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 111)</span><br><span class="line"></span><br><span class="line">Q: The variables score0 and score1 are the scores for Player 0</span><br><span class="line">and Player 1, respectively. Under what conditions should the</span><br><span class="line">game continue?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) While score1 is less than goal</span><br><span class="line">1) While at least one of score0 or score1 is less than goal</span><br><span class="line">2) While score0 and score1 are both less than goal</span><br><span class="line">3) While score0 is less than goal</span><br><span class="line">? 2</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 5 &gt; Suite 1 &gt; Case 2</span><br><span class="line">(cases remaining: 110)</span><br><span class="line"></span><br><span class="line">Q: What is a strategy in the context of this game?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) A player&#x27;s desired turn outcome</span><br><span class="line">1) A function that returns the number of dice a player will roll</span><br><span class="line">2) The number of dice a player will roll</span><br><span class="line">? 1</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 5 &gt; Suite 1 &gt; Case 3</span><br><span class="line">(cases remaining: 109)</span><br><span class="line"></span><br><span class="line">Q: If strategy1 is Player 1&#x27;s strategy function, score0 is</span><br><span class="line">Player 0&#x27;s current score, and score1 is Player 1&#x27;s current</span><br><span class="line">score, then which of the following demonstrates correct</span><br><span class="line">usage of strategy1?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) strategy1(score1)</span><br><span class="line">1) strategy1(score0, score1)</span><br><span class="line">2) strategy1(score0)</span><br><span class="line">3) strategy1(score1, score0)</span><br><span class="line">? 1</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) strategy1(score1)</span><br><span class="line">1) strategy1(score0, score1)</span><br><span class="line">2) strategy1(score0)</span><br><span class="line">3) strategy1(score1, score0)</span><br><span class="line">? 3</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 5 &gt; Suite 2 &gt; Case 1</span><br><span class="line">(cases remaining: 108)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import hog</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; always_three = hog.make_test_dice(3)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; always = hog.always_roll</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Play function stops at goal</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0, s1 = hog.play(always(5), always(3), score0=91, score1=10, dice=always_three)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0</span></span><br><span class="line">? 15</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? 106</span><br><span class="line">-- OK! --</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s1</span></span><br><span class="line">? 10</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 5 &gt; Suite 2 &gt; Case 2</span><br><span class="line">(cases remaining: 107)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import hog</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; always_three = hog.make_test_dice(3)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; always = hog.always_roll</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Goal score is not hardwired</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0, s1 = hog.play(always(5), always(5), goal=10, dice=always_three)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0</span></span><br><span class="line">? 15</span><br><span class="line">-- OK! --</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s1</span></span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 5 &gt; Suite 2 &gt; Case 3</span><br><span class="line">(cases remaining: 106)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 5 &gt; Suite 2 &gt; Case 4</span><br><span class="line">(cases remaining: 105)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 5 &gt; Suite 3 &gt; Case 1</span><br><span class="line">(cases remaining: 104)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import hog</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; always_three = hog.make_test_dice(3)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; always_seven = hog.make_test_dice(7)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Use strategies</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># We recommend working this out turn-by-turn on a piece of paper (use Python for difficult calculations).</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; strat0 = lambda score, opponent: opponent % 10</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; strat1 = lambda score, opponent: max((score // <span class="number">10</span>) - <span class="number">4</span>, <span class="number">0</span>)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0, s1 = hog.play(strat0, strat1, score0=<span class="number">71</span>, score1=<span class="number">80</span>, dice=always_seven)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0</span></span><br><span class="line">? 74</span><br><span class="line">-- OK! --</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s1</span></span><br><span class="line">? 108</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 5 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">play</span>(<span class="params">strategy0, strategy1, score0=<span class="number">0</span>, score1=<span class="number">0</span>, dice=six_sided,</span></span><br><span class="line"><span class="params">         goal=GOAL_SCORE, say=silence</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Simulate a game and return the final scores of both players, with Player</span></span><br><span class="line"><span class="string">    0&#x27;s score first, and Player 1&#x27;s score second.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    A strategy is a function that takes two total scores as arguments (the</span></span><br><span class="line"><span class="string">    current player&#x27;s score, and the opponent&#x27;s score), and returns a number of</span></span><br><span class="line"><span class="string">    dice that the current player will roll this turn.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    strategy0:  The strategy function for Player 0, who plays first.</span></span><br><span class="line"><span class="string">    strategy1:  The strategy function for Player 1, who plays second.</span></span><br><span class="line"><span class="string">    score0:     Starting score for Player 0</span></span><br><span class="line"><span class="string">    score1:     Starting score for Player 1</span></span><br><span class="line"><span class="string">    dice:       A function of zero arguments that simulates a dice roll.</span></span><br><span class="line"><span class="string">    goal:       The game ends and someone wins when this score is reached.</span></span><br><span class="line"><span class="string">    say:        The commentary function to call at the end of the first turn.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    who = <span class="number">0</span>  <span class="comment"># Who is about to take a turn, 0 (first) or 1 (second)</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 5</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="comment"># END PROBLEM 5</span></span><br><span class="line">    <span class="comment"># (note that the indentation for the problem 6 prompt (***YOUR CODE HERE***) might be misleading)</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 6</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">while</span> score0 &lt; goal <span class="keyword">and</span> score1 &lt; goal:</span><br><span class="line">        <span class="keyword">if</span> who == <span class="number">0</span>:</span><br><span class="line">            num_rolls = strategy0(score0, score1)</span><br><span class="line">            score0 += take_turn(num_rolls, score1, dice, goal)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> more_boar(score0, score1):</span><br><span class="line">                who = next_player(who)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            num_rolls = strategy1(score1, score0)</span><br><span class="line">            score1 += take_turn(num_rolls, score0, dice, goal)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> more_boar(score1, score0):</span><br><span class="line">                who = next_player(who)</span><br><span class="line">    <span class="comment"># END PROBLEM 6</span></span><br><span class="line">    <span class="keyword">return</span> score0, score1</span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 05 --local</span><br></pre></td></tr></table></figure>

<h3 id="Phase-2-Commentary"><a href="#Phase-2-Commentary" class="headerlink" title="Phase 2: Commentary"></a>Phase 2: Commentary</h3><h4 id="Commentary-examples"><a href="#Commentary-examples" class="headerlink" title="Commentary examples"></a>Commentary examples</h4><p><code>say_scores</code>函数：打印两位玩家的分数，返回自身函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">say_scores</span>(<span class="params">score0, score1</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A commentary function that announces the score for each player.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Player 0 now has&quot;</span>, score0, <span class="string">&quot;and Player 1 now has&quot;</span>, score1)</span><br><span class="line">    <span class="keyword">return</span> say_scores</span><br></pre></td></tr></table></figure>

<p><code>announce_lead_changes</code>：打印分数领先的玩家和分数差，返回一个评论函数<code>say</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">announce_lead_changes</span>(<span class="params">last_leader=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a commentary function that announces lead changes.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f0 = announce_lead_changes()</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f1 = f0(5, 0)</span></span><br><span class="line"><span class="string">    Player 0 takes the lead by 5</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f2 = f1(5, 12)</span></span><br><span class="line"><span class="string">    Player 1 takes the lead by 7</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f3 = f2(8, 12)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f4 = f3(8, 13)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f5 = f4(15, 13)</span></span><br><span class="line"><span class="string">    Player 0 takes the lead by 2</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say</span>(<span class="params">score0, score1</span>):</span><br><span class="line">        <span class="keyword">if</span> score0 &gt; score1:</span><br><span class="line">            leader = <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> score1 &gt; score0:</span><br><span class="line">            leader = <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            leader = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> leader != <span class="literal">None</span> <span class="keyword">and</span> leader != last_leader:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Player&#x27;</span>, leader, <span class="string">&#x27;takes the lead by&#x27;</span>, <span class="built_in">abs</span>(score0 - score1))</span><br><span class="line">        <span class="keyword">return</span> announce_lead_changes(leader)</span><br><span class="line">    <span class="keyword">return</span> say</span><br></pre></td></tr></table></figure>

<p><code>both(f, g)</code>函数：返回一个能够打印<code>f</code>和<code>g</code>函数的评论的函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">both</span>(<span class="params">f, g</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a commentary function that says what f says, then what g says.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    NOTE: the following game is not possible under the rules, it&#x27;s just</span></span><br><span class="line"><span class="string">    an example for the sake of the doctest</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; h0 = both(say_scores, announce_lead_changes())</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; h1 = h0(10, 0)</span></span><br><span class="line"><span class="string">    Player 0 now has 10 and Player 1 now has 0</span></span><br><span class="line"><span class="string">    Player 0 takes the lead by 10</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; h2 = h1(10, 8)</span></span><br><span class="line"><span class="string">    Player 0 now has 10 and Player 1 now has 8</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; h3 = h2(10, 17)</span></span><br><span class="line"><span class="string">    Player 0 now has 10 and Player 1 now has 17</span></span><br><span class="line"><span class="string">    Player 1 takes the lead by 7</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say</span>(<span class="params">score0, score1</span>):</span><br><span class="line">        <span class="keyword">return</span> both(f(score0, score1), g(score0, score1))</span><br><span class="line">    <span class="keyword">return</span> say</span><br></pre></td></tr></table></figure>

<h4 id="Problem-6-2-pt"><a href="#Problem-6-2-pt" class="headerlink" title="Problem 6 (2 pt)"></a>Problem 6 (2 pt)</h4><p>在<code>play</code>函数中，每回合结束时调用<code>say</code>函数，下一回合掉用本回合<code>say</code>的返回值</p>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 06 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 6 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 8)</span><br><span class="line"></span><br><span class="line">Q: What does a commentary function return?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) An integer representing the score.</span><br><span class="line">1) None.</span><br><span class="line">2) Another commentary function.</span><br><span class="line">? 2</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 6 &gt; Suite 2 &gt; Case 1</span><br><span class="line">(cases remaining: 7)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import play, always_roll</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from dice import make_test_dice</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; def <span class="built_in">echo</span>(s0, s1):</span></span><br><span class="line">...     print(s0, s1)</span><br><span class="line">...     return echo</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0, s1 = play(always_roll(1), always_roll(1), dice=make_test_dice(3), goal=5, say=<span class="built_in">echo</span>)</span></span><br><span class="line">(line 1)? 4 3</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">(line 1)? 3 0</span><br><span class="line">(line 2)? 3 3</span><br><span class="line">(line 3)? 6 3</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 6 &gt; Suite 2 &gt; Case 2</span><br><span class="line">(cases remaining: 6)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import play, always_roll</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from dice import make_test_dice</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; def count(n):</span></span><br><span class="line">...     def say(s0, s1):</span><br><span class="line">...         print(n, s0)</span><br><span class="line">...         return count(n + 1)</span><br><span class="line">...     return say</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0, s1 = play(always_roll(1), always_roll(1), dice=make_test_dice(5), goal=10, say=count(1))</span></span><br><span class="line">(line 1)? 1 5</span><br><span class="line">(line 2)? 2 5</span><br><span class="line">(line 3)? 3 10</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 6 &gt; Suite 2 &gt; Case 3</span><br><span class="line">(cases remaining: 5)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import play, always_roll</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from dice import make_test_dice</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; def <span class="built_in">echo</span>(s0, s1):</span></span><br><span class="line">...     print(s0, s1)</span><br><span class="line">...     return echo</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; strat0 = lambda score, opponent: 1 - opponent // 10</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; strat1 = always_roll(3)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0, s1 = play(strat0, strat1, dice=make_test_dice(4, 2, 6), goal=15, say=<span class="built_in">echo</span>)</span></span><br><span class="line">(line 1)? 4 0</span><br><span class="line">(line 2)? 4 12</span><br><span class="line">(line 3)? 6 12</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">(line 1)? 4 0</span><br><span class="line">(line 2)? 4 12</span><br><span class="line">(line 3)? 8 12</span><br><span class="line">(line 4)? 8 24</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 6 &gt; Suite 2 &gt; Case 4</span><br><span class="line">(cases remaining: 4)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import play, always_roll</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from dice import make_test_dice</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Ensure that say is properly updated within the body of play</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; def total(s0, s1):</span></span><br><span class="line">...     print(s0 + s1)</span><br><span class="line">...     return echo</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; def <span class="built_in">echo</span>(s0, s1):</span></span><br><span class="line">...     print(s0, s1)</span><br><span class="line">...     return total</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0, s1 = play(always_roll(1), always_roll(1), dice=make_test_dice(2, 5), goal=10, say=<span class="built_in">echo</span>)</span></span><br><span class="line">(line 1)? 2 0</span><br><span class="line">(line 2)? 7</span><br><span class="line">(line 3)? 4 5</span><br><span class="line">(line 4)? 14</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 6 &gt; Suite 2 &gt; Case 5</span><br><span class="line">(cases remaining: 3)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import play, always_roll</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from dice import make_test_dice</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Ensure that say is properly updated within the body of play even with extra turns</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; def total(s0, s1):</span></span><br><span class="line">...     print(s0 + s1)</span><br><span class="line">...     return echo</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; def <span class="built_in">echo</span>(s0, s1):</span></span><br><span class="line">...     print(s0, s1)</span><br><span class="line">...     return total</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0, s1 = play(always_roll(1), always_roll(1), dice=make_test_dice(8, 2), goal=20, say=<span class="built_in">echo</span>)</span></span><br><span class="line">(line 1)? 8 0</span><br><span class="line">(line 2)? 10</span><br><span class="line">(line 3)? 16 2</span><br><span class="line">(line 4)? 20</span><br><span class="line">(line 5)? 16 12</span><br><span class="line">(line 6)? 30</span><br><span class="line">(line 7)? 18 20</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 6 &gt; Suite 3 &gt; Case 1</span><br><span class="line">(cases remaining: 2)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import play, always_roll, both, announce_lead_changes, say_scores</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from dice import make_test_dice</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; def echo_0(s0, s1):</span></span><br><span class="line">...     print(&#x27;*&#x27;, s0)</span><br><span class="line">...     return echo_0</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; def echo_1(s0, s1):</span></span><br><span class="line">...     print(&#x27;**&#x27;, s1)</span><br><span class="line">...     return echo_1</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; s0, s1 = play(always_roll(1), always_roll(1), dice=make_test_dice(2), goal=3, say=both(echo_0, echo_1))</span></span><br><span class="line">(line 1)? * 2</span><br><span class="line">(line 2)? ** 0</span><br><span class="line">(line 3)? * 2</span><br><span class="line">(line 4)? ** 2</span><br><span class="line">(line 5)? * 4</span><br><span class="line">(line 6)? ** 2</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 6 &gt; Suite 3 &gt; Case 2</span><br><span class="line">(cases remaining: 1)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 6 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>实现代码如下，在<code>play</code>函数中加入一行<code>say = say(score0, score1)</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">play</span>(<span class="params">strategy0, strategy1, score0=<span class="number">0</span>, score1=<span class="number">0</span>, dice=six_sided,</span></span><br><span class="line"><span class="params">         goal=GOAL_SCORE, say=silence</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Simulate a game and return the final scores of both players, with Player</span></span><br><span class="line"><span class="string">    0&#x27;s score first, and Player 1&#x27;s score second.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    A strategy is a function that takes two total scores as arguments (the</span></span><br><span class="line"><span class="string">    current player&#x27;s score, and the opponent&#x27;s score), and returns a number of</span></span><br><span class="line"><span class="string">    dice that the current player will roll this turn.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    strategy0:  The strategy function for Player 0, who plays first.</span></span><br><span class="line"><span class="string">    strategy1:  The strategy function for Player 1, who plays second.</span></span><br><span class="line"><span class="string">    score0:     Starting score for Player 0</span></span><br><span class="line"><span class="string">    score1:     Starting score for Player 1</span></span><br><span class="line"><span class="string">    dice:       A function of zero arguments that simulates a dice roll.</span></span><br><span class="line"><span class="string">    goal:       The game ends and someone wins when this score is reached.</span></span><br><span class="line"><span class="string">    say:        The commentary function to call at the end of the first turn.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    who = <span class="number">0</span>  <span class="comment"># Who is about to take a turn, 0 (first) or 1 (second)</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 5</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="comment"># END PROBLEM 5</span></span><br><span class="line">    <span class="comment"># (note that the indentation for the problem 6 prompt (***YOUR CODE HERE***) might be misleading)</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 6</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">while</span> score0 &lt; goal <span class="keyword">and</span> score1 &lt; goal:</span><br><span class="line">        <span class="keyword">if</span> who == <span class="number">0</span>:</span><br><span class="line">            num_rolls = strategy0(score0, score1)</span><br><span class="line">            score0 += take_turn(num_rolls, score1, dice, goal)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> more_boar(score0, score1):</span><br><span class="line">                who = next_player(who)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            num_rolls = strategy1(score1, score0)</span><br><span class="line">            score1 += take_turn(num_rolls, score0, dice, goal)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> more_boar(score1, score0):</span><br><span class="line">                who = next_player(who)</span><br><span class="line">        say = say(score0, score1)	<span class="comment"># here!</span></span><br><span class="line">    <span class="comment"># END PROBLEM 6</span></span><br><span class="line">    <span class="keyword">return</span> score0, score1</span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 06 --local</span><br></pre></td></tr></table></figure>

<h4 id="Problem-7-3-pt"><a href="#Problem-7-3-pt" class="headerlink" title="Problem 7 (3 pt)"></a>Problem 7 (3 pt)</h4><p>实现<code>announce_highest(who, last_score=0, running_high=0)</code>函数:</p>
<ul>
<li><code>who</code>：<code>1</code>表示玩家1，<code>0</code>表示玩家0</li>
<li><code>last_score</code>：上一个分数</li>
<li><code>running_high</code>：分数的最高增长</li>
</ul>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 07 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 7 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 5)</span><br><span class="line"></span><br><span class="line">Q: What does announce_highest return?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) A string containing the largest point increase for the</span><br><span class="line">   current player.</span><br><span class="line">1) The current largest point increase between both</span><br><span class="line">   players.</span><br><span class="line">2) A commentary function that prints information about the</span><br><span class="line">   biggest point increase for the current player.</span><br><span class="line">? 2</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 7 &gt; Suite 1 &gt; Case 2</span><br><span class="line">(cases remaining: 4)</span><br><span class="line"></span><br><span class="line">Q: When does the commentary function returned by announce_highest</span><br><span class="line">print something out?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) After each turn.</span><br><span class="line">1) When the current player, given by the parameter `who`,</span><br><span class="line">   earns the biggest point increase yet between both</span><br><span class="line">   players in the game.</span><br><span class="line">2) When the current player, given by the parameter `who`,</span><br><span class="line">   earns their biggest point increase yet in the game.</span><br><span class="line">? 1</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) After each turn.</span><br><span class="line">1) When the current player, given by the parameter `who`,</span><br><span class="line">   earns the biggest point increase yet between both</span><br><span class="line">   players in the game.</span><br><span class="line">2) When the current player, given by the parameter `who`,</span><br><span class="line">   earns their biggest point increase yet in the game.</span><br><span class="line">? 2</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 7 &gt; Suite 1 &gt; Case 3</span><br><span class="line">(cases remaining: 3)</span><br><span class="line"></span><br><span class="line">Q: What does the parameter last_score represent?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) The relevant player&#x27;s score before this turn.</span><br><span class="line">1) The opponent&#x27;s score before this turn.</span><br><span class="line">2) The last highest gain for the current player.</span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 7 &gt; Suite 2 &gt; Case 1</span><br><span class="line">(cases remaining: 2)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 7 &gt; Suite 2 &gt; Case 2</span><br><span class="line">(cases remaining: 1)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 7 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>思路：返回一个函数<code>func</code>，打印评论时更新<code>last_score</code>和<code>running_high</code>，返回<code>announce_highest</code>函数的调用，新的函数的环境帧会有新的值，<code>nonlocal</code>关键字可以引入父环境中的引用。</p>
<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">announce_highest</span>(<span class="params">who, last_score=<span class="number">0</span>, running_high=<span class="number">0</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a commentary function that announces when WHO&#x27;s score</span></span><br><span class="line"><span class="string">    increases by more than ever before in the game.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    NOTE: the following game is not possible under the rules, it&#x27;s just</span></span><br><span class="line"><span class="string">    an example for the sake of the doctest</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f0 = announce_highest(1) # Only announce Player 1 score gains</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f1 = f0(12, 0)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f2 = f1(12, 9)</span></span><br><span class="line"><span class="string">    Player 1 has reached a new maximum point gain. 9 point(s)!</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f3 = f2(20, 9)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f4 = f3(20, 30)</span></span><br><span class="line"><span class="string">    Player 1 has reached a new maximum point gain. 21 point(s)!</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f5 = f4(20, 47) # Player 1 gets 17 points; not enough for a new high</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f6 = f5(21, 47)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; f7 = f6(21, 77)</span></span><br><span class="line"><span class="string">    Player 1 has reached a new maximum point gain. 30 point(s)!</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> who == <span class="number">0</span> <span class="keyword">or</span> who == <span class="number">1</span>, <span class="string">&#x27;The who argument should indicate a player.&#x27;</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 7</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">score0, score1</span>):</span><br><span class="line">        <span class="keyword">nonlocal</span> last_score</span><br><span class="line">        <span class="keyword">nonlocal</span> running_high</span><br><span class="line">        ls = last_score</span><br><span class="line">        rh = running_high</span><br><span class="line">        <span class="keyword">if</span> who == <span class="number">0</span>:</span><br><span class="line">            tmp = score0 - ls</span><br><span class="line">            <span class="keyword">if</span> tmp &gt; rh:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Player 0 has reached a new maximum point gain.&quot;</span>, tmp,<span class="string">&quot;point(s)!&quot;</span>)</span><br><span class="line">                rh = tmp</span><br><span class="line">            ls = score0</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tmp = score1 - ls</span><br><span class="line">            <span class="keyword">if</span> tmp &gt; rh:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Player 1 has reached a new maximum point gain.&quot;</span>, tmp,<span class="string">&quot;point(s)!&quot;</span>)</span><br><span class="line">                rh = tmp</span><br><span class="line">            ls = score1</span><br><span class="line">        <span class="keyword">return</span> announce_highest(who, ls, rh)</span><br><span class="line">    <span class="keyword">return</span> func</span><br><span class="line">    <span class="comment"># END PROBLEM 7</span></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 07 --local</span><br></pre></td></tr></table></figure>

<h3 id="Phase-3-Strategies"><a href="#Phase-3-Strategies" class="headerlink" title="Phase 3: Strategies"></a>Phase 3: Strategies</h3><h4 id="Problem-8-2-pt"><a href="#Problem-8-2-pt" class="headerlink" title="Problem 8 (2 pt)"></a>Problem 8 (2 pt)</h4><p>实现<code>make_averaged(original_function, trials_count=1000)</code>函数，返回一个函数，有和<code>original_function</code>一样的参数，调用后，计算调用<code>trials_count</code>次<code>original_function</code>函数的平均值。</p>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 08 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 8 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 7)</span><br><span class="line"></span><br><span class="line">Q: What makes make_averaged a higher order function?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) It uses the *args keyword</span><br><span class="line">1) It calls a function that is not itself</span><br><span class="line">2) It contains a nested function</span><br><span class="line">3) It both takes in a function as an argument and returns a function</span><br><span class="line">? 3</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 8 &gt; Suite 1 &gt; Case 2</span><br><span class="line">(cases remaining: 6)</span><br><span class="line"></span><br><span class="line">Q: How many arguments does the function passed into make_averaged take?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) An arbitrary amount, which is why we need to use *args to call it</span><br><span class="line">1) Two</span><br><span class="line">2) None</span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 8 &gt; Suite 2 &gt; Case 1</span><br><span class="line">(cases remaining: 5)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; dice = make_test_dice(3, 1, 5, 6)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; averaged_dice = make_averaged(dice, 1000)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Average of calling dice 1000 times</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; averaged_dice()</span></span><br><span class="line">? 3.75</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 8 &gt; Suite 2 &gt; Case 2</span><br><span class="line">(cases remaining: 4)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; dice = make_test_dice(3, 1, 5, 6)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; averaged_roll_dice = make_averaged(roll_dice, 1000)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Average of calling roll_dice 1000 times</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="comment"># Enter a float (e.g. 1.0) instead of an integer</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; averaged_roll_dice(2, dice)</span></span><br><span class="line">? 7.5</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? 6</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? 6.0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 8 &gt; Suite 3 &gt; Case 1</span><br><span class="line">(cases remaining: 3)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 8 &gt; Suite 3 &gt; Case 2</span><br><span class="line">(cases remaining: 2)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 8 &gt; Suite 3 &gt; Case 3</span><br><span class="line">(cases remaining: 1)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 8 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">make_averaged</span>(<span class="params">original_function, trials_count=<span class="number">1000</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a function that returns the average value of ORIGINAL_FUNCTION</span></span><br><span class="line"><span class="string">    when called.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    To implement this function, you will have to use *args syntax, a new Python</span></span><br><span class="line"><span class="string">    feature introduced in this project.  See the project description.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; dice = make_test_dice(4, 2, 5, 1)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; averaged_dice = make_averaged(roll_dice, 1000)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; averaged_dice(1, dice)</span></span><br><span class="line"><span class="string">    3.0</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 8</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*argv</span>):</span><br><span class="line">        <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, trials_count):</span><br><span class="line">            <span class="built_in">sum</span> += original_function(*argv)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span> / trials_count</span><br><span class="line">    <span class="keyword">return</span> func</span><br><span class="line">    <span class="comment"># END PROBLEM 8</span></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 08 --local</span><br></pre></td></tr></table></figure>

<h4 id="Problem-9-2-pt"><a href="#Problem-9-2-pt" class="headerlink" title="Problem 9 (2 pt)"></a>Problem 9 (2 pt)</h4><p>实现<code>max_scoring_num_rolls</code>函数，返回<code>1~10</code>中得分期望最大的骰子数量。</p>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 09 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 9 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 8)</span><br><span class="line"></span><br><span class="line">Q: If multiple num_rolls are tied for the highest scoring</span><br><span class="line">average, which should you return?</span><br><span class="line">Choose the number of the correct choice:</span><br><span class="line">0) The highest num_rolls</span><br><span class="line">1) A random num_rolls</span><br><span class="line">2) The lowest num_rolls</span><br><span class="line">? 2</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 9 &gt; Suite 2 &gt; Case 1</span><br><span class="line">(cases remaining: 7)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; dice = make_test_dice(3)   <span class="comment"># dice always returns 3</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; max_scoring_num_rolls(dice, trials_count=1000)</span></span><br><span class="line">? 1</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? 10</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 9 &gt; Suite 2 &gt; Case 2</span><br><span class="line">(cases remaining: 6)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 9 &gt; Suite 2 &gt; Case 3</span><br><span class="line">(cases remaining: 5)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 9 &gt; Suite 3 &gt; Case 1</span><br><span class="line">(cases remaining: 4)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; dice = make_test_dice(2)     <span class="comment"># dice always rolls 2</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; max_scoring_num_rolls(dice, trials_count=1000)</span></span><br><span class="line">? 10</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 9 &gt; Suite 3 &gt; Case 2</span><br><span class="line">(cases remaining: 3)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; dice = make_test_dice(1, 2)  <span class="comment"># dice alternates 1 and 2</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; max_scoring_num_rolls(dice, trials_count=1000)</span></span><br><span class="line">? 1</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 9 &gt; Suite 3 &gt; Case 3</span><br><span class="line">(cases remaining: 2)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 9 &gt; Suite 3 &gt; Case 4</span><br><span class="line">(cases remaining: 1)</span><br><span class="line"></span><br><span class="line">-- Already unlocked --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 9 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">max_scoring_num_rolls</span>(<span class="params">dice=six_sided, trials_count=<span class="number">1000</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return the number of dice (1 to 10) that gives the highest average turn score</span></span><br><span class="line"><span class="string">    by calling roll_dice with the provided DICE a total of TRIALS_COUNT times.</span></span><br><span class="line"><span class="string">    Assume that the dice always return positive outcomes.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; dice = make_test_dice(1, 6)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; max_scoring_num_rolls(dice)</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 9</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    num_rolls = <span class="number">0</span></span><br><span class="line">    max_scores = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">        averaged_dice = make_averaged(roll_dice, trials_count)</span><br><span class="line">        tmp = averaged_dice(i, dice)</span><br><span class="line">        <span class="keyword">if</span> max_scores &lt; tmp:</span><br><span class="line">            num_rolls = i</span><br><span class="line">            max_scores = tmp</span><br><span class="line">    <span class="keyword">return</span> num_rolls</span><br><span class="line">    <span class="comment"># END PROBLEM 9</span></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 09 --local</span><br></pre></td></tr></table></figure>

<p>可以使用如下命令测试策略的胜率（<code>win rate</code>）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 hog.py -r</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Max scoring num rolls for six-sided dice: 5</span><br><span class="line">always_roll(6) win rate: 0.4955</span><br><span class="line">always_roll(8) win rate: 0.532</span><br><span class="line">piggypoints_strategy win rate: 0.484</span><br><span class="line">more_boar_strategy win rate: 0.51</span><br><span class="line">final_strategy win rate: 0.5165</span><br></pre></td></tr></table></figure>

<h4 id="Problem-10-1-pt"><a href="#Problem-10-1-pt" class="headerlink" title="Problem 10 (1 pt)"></a>Problem 10 (1 pt)</h4><p>实现<code>piggypoints_strategy(score, opponent_score, cutoff=8, num_rolls=6)</code>函数，如果使用<code>Piggy Points</code>规则至少能得到<code>cutoff</code>分数，就摇<code>0</code>个骰子。</p>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 10 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 10 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 106)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; piggypoints_strategy(0, 3, cutoff=8, num_rolls=5)</span></span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 10 &gt; Suite 1 &gt; Case 2</span><br><span class="line">(cases remaining: 105)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; piggypoints_strategy(9, 0, cutoff=6, num_rolls=5)</span></span><br><span class="line">? 5</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 10 &gt; Suite 1 &gt; Case 3</span><br><span class="line">(cases remaining: 104)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; piggypoints_strategy(50, 2, cutoff=7, num_rolls=5)</span></span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 10 &gt; Suite 1 &gt; Case 4</span><br><span class="line">(cases remaining: 103)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; piggypoints_strategy(32, 0, cutoff=8, num_rolls=4)</span></span><br><span class="line">? 4</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 10 &gt; Suite 1 &gt; Case 5</span><br><span class="line">(cases remaining: 102)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; piggypoints_strategy(20, 1, cutoff=1, num_rolls=4)</span></span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">OK! All cases for Question 10 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">piggypoints_strategy</span>(<span class="params">score, opponent_score, cutoff=<span class="number">8</span>, num_rolls=<span class="number">6</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;This strategy rolls 0 dice if that gives at least CUTOFF points, and</span></span><br><span class="line"><span class="string">    rolls NUM_ROLLS otherwise.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 10</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="number">0</span> <span class="keyword">if</span> piggy_points(opponent_score) &gt;= cutoff <span class="keyword">else</span> num_rolls)</span><br><span class="line">    <span class="comment"># END PROBLEM 10</span></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 10 --local</span><br></pre></td></tr></table></figure>

<h4 id="Problem-11-2-pt"><a href="#Problem-11-2-pt" class="headerlink" title="Problem 11 (2 pt)"></a>Problem 11 (2 pt)</h4><p>实现<code>more_boar_strategy(score, opponent_score, cutoff=8, num_rolls=6)</code>函数，如果能使用<code>More Boar</code>规则，就摇<code>0</code>个骰子；否则，若摇<code>0</code>个骰子得分大于<code>cutoff</code>，就摇<code>0</code>个骰子，不然返回<code>num_rolls</code>。</p>
<p>运行如下代码进行解锁测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 11 -u --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project 1: Hog</span><br><span class="line">OK, version v1.18.1</span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Unlocking tests</span><br><span class="line"></span><br><span class="line">At each &quot;? &quot;, type what you would expect the output to be.</span><br><span class="line">Type exit() to quit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 11 &gt; Suite 1 &gt; Case 1</span><br><span class="line">(cases remaining: 105)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; more_boar_strategy(3, 19, cutoff=8, num_rolls=6)</span></span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 11 &gt; Suite 1 &gt; Case 2</span><br><span class="line">(cases remaining: 104)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; more_boar_strategy(30, 54, cutoff=7, num_rolls=6)</span></span><br><span class="line">? 0</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? 6</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 11 &gt; Suite 1 &gt; Case 3</span><br><span class="line">(cases remaining: 103)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; more_boar_strategy(17, 36, cutoff=100, num_rolls=6)</span></span><br><span class="line">? 6</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Question 11 &gt; Suite 1 &gt; Case 4</span><br><span class="line">(cases remaining: 102)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from hog import *</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; more_boar_strategy(24, 3, cutoff=8, num_rolls=6)</span></span><br><span class="line">? 0</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">OK! All cases for Question 11 unlocked.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok with --local.</span><br></pre></td></tr></table></figure>

<p>思路：注意到，检测<code>More Boar</code>规则要在加上<code>Piggy Points</code>规则的得分之后进行。</p>
<p>实现代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">more_boar_strategy</span>(<span class="params">score, opponent_score, cutoff=<span class="number">8</span>, num_rolls=<span class="number">6</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;This strategy rolls 0 dice when it triggers an extra turn. It also</span></span><br><span class="line"><span class="string">    rolls 0 dice if it gives at least CUTOFF points and does not give an extra turn.</span></span><br><span class="line"><span class="string">    Otherwise, it rolls NUM_ROLLS.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># BEGIN PROBLEM 11</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> more_boar(score + piggy_points(opponent_score), opponent_score) <span class="keyword">else</span> piggypoints_strategy(score, opponent_score, cutoff, num_rolls)</span><br><span class="line">    <span class="comment"># END PROBLEM 11</span></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 11 --local</span><br></pre></td></tr></table></figure>

<h4 id="Optional-Problem-12-0-pt"><a href="#Optional-Problem-12-0-pt" class="headerlink" title="Optional: Problem 12 (0 pt)"></a>Optional: Problem 12 (0 pt)</h4><p>自己实现一个策略，追求更高胜率，有时间再来填坑。</p>
<p>实现代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以使用如下命令进行测评：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok -q 12 --local</span><br></pre></td></tr></table></figure>

<h3 id="最终测评"><a href="#最终测评" class="headerlink" title="最终测评"></a>最终测评</h3><p>可以使用如下命令进行测评：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ok --local</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">Assignment: Project <span class="number">1</span>: Hog</span><br><span class="line">OK, version v1<span class="number">.18</span><span class="number">.1</span></span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Running tests</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">Test summary</span><br><span class="line">    <span class="number">565</span> test cases passed! No cases failed.</span><br><span class="line"></span><br><span class="line">Cannot backup when running ok <span class="keyword">with</span> --local.</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/06/09/CS61A-Homework02/" rel="prev" title="CS61A Homework02">
                  <i class="fa fa-angle-left"></i> CS61A Homework02
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/06/10/CS61A-CourseNote-Week03/" rel="next" title="CS61A 课程笔记 Week03">
                  CS61A 课程笔记 Week03 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Rex</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  





</body>
</html>
